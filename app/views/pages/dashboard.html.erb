<% unless @goal.nil? %>
  <div class="container-main">
    <div class="container-top">
      <div class="goal-title">
        <h2><%= @goal.title %> <%= @goal.emoji %></h2>
      </div>
    </div>

    <div class="container-center">
      <div class="progress-message">
        <% if @quote %>
          <div class="quote">
            <p><%= @quote["q"] %></p>
            <p><strong>- <%= @quote["a"] %></strong></p>
          </div>
        <% else %>
          <p>No quote found.</p>
        <% end %>
      </div>

  <div class="scroll-container" data-controller="toggle">
  <% @tasks.each do |task| %>
    <div class="task-item-dashboard" data-pagination-target="taskItem" data-task-id="<%= task.id %>">
      <%= task.title %>
      <form action="/goals/<%= @goal.id %>/tasks/<%= task.id %>" method="post" class="update-task-form" data-action="submit->toggle#submitForm">
        <input type="hidden" name="_method" value="patch">
        <input type="hidden" name="task[done]" value="check">
          <% if task.done %>
        <input type="submit" class="btn btn-secondary" value="Undone">
          <% else %>
        <input type="submit" class="btn btn-primary" value="Done">
                <% end %>
      </form>
    </div>
  <% end %>
</div>



    <div class="container">
<%= image_tag(@goal.image_progress, id: "goal-image-progress") %>

      <div class="days-remaining">
        <p><%= (@goal.end_time - DateTime.now).to_i / (60 * 60 * 24)%> days</p>
      </div>

      <div class="tasks-container">
      <p><%= @goal.progress %>% reached</p>
      </div>
  </div>

      <div class="tasks-container">
<p id="goal-progress-text"><%= @goal.progress %>% reached</p>
      </div>
    </div>

    <div class="container-bottom">
      <%= render "shared/navbar_bottom" %>
    </div>

<% else %>
  <%= link_to new_goal_path do %>
    <div>
      <h1>Create your first goal!</h1>
    </div>
  <% end %>
<% end %>
